# view-focus.conf - Configuration for nested tmux in Navigator view pane
#
# This config is used when attaching to sessions from within the Navigator.
# It removes the prefix key and binds Escape directly to detach, allowing
# the user to return to the Navigator session list.
#
# Key insight: All input passes through to the Claude session except Escape,
# which returns control to Navigator.

# ============================================================================
# Prefix Configuration
# ============================================================================

# Disable prefix entirely - all keys pass through to the inner session
set -g prefix None
set -g prefix2 None

# Unbind all prefix-dependent keys
unbind-key -a

# ============================================================================
# Escape Binding
# ============================================================================

# Escape detaches from this inner session, returning to Navigator
# This is the ONLY key that Navigator intercepts
bind-key -n Escape detach-client

# ============================================================================
# Visual Settings
# ============================================================================

# Hide status bar for clean look (Navigator provides its own status)
set -g status off

# No visual activity indicators (avoid interference with Claude output)
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off

# ============================================================================
# Behavior Settings
# ============================================================================

# Disable mouse (let outer Navigator tmux handle it if needed)
set -g mouse off

# Fast escape time (don't wait for escape sequences)
set -sg escape-time 0

# Don't rename windows based on running command
setw -g automatic-rename off
setw -g allow-rename off

# ============================================================================
# Compatibility
# ============================================================================

# Ensure proper terminal support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Large history (useful for viewing Claude output)
set -g history-limit 50000

# ============================================================================
# Input Mode Enhancement
# ============================================================================

# When user presses 'i' in Navigator and focuses this pane, they can:
# - Type normally to interact with Claude
# - Press Escape to return to Navigator list
#
# All other tmux shortcuts are disabled, creating a pass-through experience.
